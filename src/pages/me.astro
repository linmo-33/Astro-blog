---
import PageLayout from "@/layouts/Base.astro";

export const prerender = true;

type LinkItem = {
	title: string;
	description?: string;
	href: string;
	tag?: string;
};

const meta = {
	title: "导航",
	description: "个人项目、站点与常用工具索引。",
};

const sections: { title: string; items: LinkItem[] }[] = [
	{
		title: "项目",
		items: [
			{
				title: "简历站",
				description: "一个免费的个人简历网站",
				href: "https://resume.zerovv.top/",
				tag: "Project",
			},
			{
				title: "激活码管理后台",
				description: "一个对设备验证激活，分发激活码的系统",
				href: "https://code.zerovv.top/",
				tag: "Project",
			},
		],
	},
	{
		title: "工具",
		items: [
			{
				title: "网盘挂载",
				description: "开源个人网盘挂载",
				href: "https://pan.zerovv.top/",
				tag: "Tool",
			},
			{
				title: "网盘聚合搜索",
				description: "网盘聚合搜索",
				href: "https://yx.zerovv.top/",
				tag: "Tool",
			},
			{
				title: "服务器状态",
				description: "服务器探针 / 状态面板",
				href: "https://status.zerovv.top/",
				tag: "Status",
			},
			{
				title: "媒体库",
				description: "Emby 服务器",
				href: "https://mv.zerovv.top/",
				tag: "Emby",
			},
			{
				title: "语音服务器",
				description: "Teamspek 服务器",
				href: "https://ts3.zerovv.top/",
				tag: "Voice",
			},
			{
				title: "临时邮箱",
				description: "临时邮箱。",
				href: "https://mail.zerovv.top/",
				tag: "Mail",
			},
		],
	},
];

const isExternal = (href: string) => /^https?:\/\//.test(href);
---

<PageLayout meta={meta}>
	<h1 class="title mb-8">导航</h1>

	<div class="prose prose-sm prose-cactus max-w-none">
		<p>
			这页是一个“常用链接集”。我会把自己在做的一些项目、常逛的站点、以及日常用到的工具放在这里。
		</p>
	</div>

	<div class="mt-10 space-y-10">
		{
			sections.map((section) => (
				<section aria-labelledby={`section-${section.title}`}>
					<h2 id={`section-${section.title}`} class="mb-4 text-lg font-bold">
						{section.title}
					</h2>

					<ul class="grid grid-cols-1 gap-4 sm:grid-cols-2">
						{
							section.items.map((item) => (
								<li class="h-full">
									<a
										class="block h-full rounded-md border border-accent/20 bg-bgColor p-4 transition hover:border-accent/40 hover:shadow-sm"
										href={item.href}
										rel={isExternal(item.href) ? "noopener noreferrer" : undefined}
										target={isExternal(item.href) ? "_blank" : undefined}
									>
										<div class="flex items-start justify-between gap-3">
											<div class="min-w-0">
												<div class="truncate font-semibold text-textColor">
													{item.title}
												</div>
												{item.description ? (
													<p class="mt-1 line-clamp-2 text-sm text-gray-600 dark:text-gray-400">
														{item.description}
													</p>
												) : null}
											</div>

											{item.tag ? (
												<span class="shrink-0 rounded bg-accent/10 px-2 py-1 text-xs font-medium text-accent">
													{item.tag}
												</span>
											) : null}
										</div>
										<p class="mt-3 text-xs text-gray-500 dark:text-gray-500">
											{item.href.replace(/^https?:\/\//, "")}
										</p>
									</a>
								</li>
							))
						}
					</ul>
				</section>
			))
		}
	</div>
</PageLayout>
